<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N5 ì™„ë²½ ëŒ€ë¹„ í•™ìŠµ ì‚¬ì´íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            color: white;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            background: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .nav-btn.active {
            background: #4CAF50;
            color: white;
        }

        .study-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 500px;
        }

        .question-container {
            text-align: center;
        }

        .question {
            font-size: 1.8rem;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .japanese-text {
            font-size: 2.2rem;
            color: #2196F3;
            font-weight: bold;
            margin: 20px 0;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .option:hover {
            border-color: #2196F3;
            background: #f0f8ff;
        }

        .option.selected {
            border-color: #2196F3;
            background: #2196F3;
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: #4CAF50;
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: #f44336;
            color: white;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #2196F3;
            color: white;
        }

        .btn-success {
            background: #4CAF50;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.3s ease;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .word-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #2196F3;
            transition: all 0.3s ease;
        }

        .word-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .word-japanese {
            font-size: 1.8rem;
            color: #2196F3;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .word-reading {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 10px;
        }

        .word-meaning {
            font-size: 1.1rem;
            color: #333;
        }

        .word-frequency {
            font-size: 0.9rem;
            color: #999;
            margin-top: 5px;
        }

        .hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .difficulty-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .difficulty-btn {
            padding: 8px 20px;
            margin: 0 5px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn.active {
            border-color: #2196F3;
            background: #2196F3;
            color: white;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .navigation {
                flex-direction: column;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‡¯ğŸ‡µ JLPT N5 ì™„ë²½ ëŒ€ë¹„</h1>
            <p>ì²´ê³„ì ì¸ í•™ìŠµìœ¼ë¡œ í•©ê²©ì„ í–¥í•´!</p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <span class="stat-number" id="totalWords">250+</span>
                <span>ì´ ì–´íœ˜ìˆ˜</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="studiedWords">0</span>
                <span>í•™ìŠµí•œ ë‹¨ì–´</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="correctRate">0%</span>
                <span>ì •ë‹µë¥ </span>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showSection('quiz')">ë¬¸ì œ í’€ê¸°</button>
            <button class="nav-btn" onclick="showSection('vocabulary')">ë‹¨ì–´ì¥</button>
            <button class="nav-btn" onclick="showSection('grammar')">ë¬¸ë²• ë¬¸ì œ</button>
            <button class="nav-btn" onclick="showSection('reading')">ë…í•´ ì—°ìŠµ</button>
        </div>

        <div class="study-area">
            <!-- ë¬¸ì œ í’€ê¸° ì„¹ì…˜ -->
            <div id="quiz-section" class="section">
                <div class="difficulty-selector">
                    <button class="difficulty-btn active" onclick="setDifficulty('basic')">ê¸°ì´ˆ</button>
                    <button class="difficulty-btn" onclick="setDifficulty('intermediate')">ì¤‘ê¸‰</button>
                    <button class="difficulty-btn" onclick="setDifficulty('advanced')">ê³ ê¸‰</button>
                    <button class="difficulty-btn" onclick="setDifficulty('mixed')">ì¢…í•©</button>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>

                <div class="question-container">
                    <div class="question" id="questionText">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                    <div class="japanese-text" id="japaneseText"></div>
                    <div class="options" id="optionsContainer"></div>
                    <div class="controls">
                        <button class="btn btn-primary" id="submitBtn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
                        <button class="btn btn-success" id="nextBtn" onclick="nextQuestion()" style="display:none">ë‹¤ìŒ ë¬¸ì œ</button>
                        <button class="btn btn-secondary" onclick="skipQuestion()">ê±´ë„ˆë›°ê¸°</button>
                    </div>
                    <div id="feedback" class="feedback" style="display:none"></div>
                </div>
            </div>

            <!-- ë‹¨ì–´ì¥ ì„¹ì…˜ -->
            <div id="vocabulary-section" class="section hidden">
                <h2 style="margin-bottom: 20px; text-align: center;">JLPT N5 í•µì‹¬ ì–´íœ˜</h2>
                <div class="word-list" id="wordList"></div>
            </div>

            <!-- ë¬¸ë²• ë¬¸ì œ ì„¹ì…˜ -->
            <div id="grammar-section" class="section hidden">
                <div class="question-container">
                    <div class="question" id="grammarQuestion">ë¬¸ë²• ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                    <div class="options" id="grammarOptions"></div>
                    <div class="controls">
                        <button class="btn btn-primary" id="grammarSubmitBtn" onclick="checkGrammarAnswer()">ì •ë‹µ í™•ì¸</button>
                        <button class="btn btn-success" id="grammarNextBtn" onclick="nextGrammarQuestion()" style="display:none">ë‹¤ìŒ ë¬¸ì œ</button>
                    </div>
                    <div id="grammarFeedback" class="feedback" style="display:none"></div>
                </div>
            </div>

            <!-- ë…í•´ ì—°ìŠµ ì„¹ì…˜ -->
            <div id="reading-section" class="section hidden">
                <div class="question-container">
                    <div class="question" id="readingPassage">ë…í•´ ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                    <div class="question" id="readingQuestion"></div>
                    <div class="options" id="readingOptions"></div>
                    <div class="controls">
                        <button class="btn btn-primary" id="readingSubmitBtn" onclick="checkReadingAnswer()">ì •ë‹µ í™•ì¸</button>
                        <button class="btn btn-success" id="readingNextBtn" onclick="nextReadingQuestion()" style="display:none">ë‹¤ìŒ ë¬¸ì œ</button>
                    </div>
                    <div id="readingFeedback" class="feedback" style="display:none"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì–´íœ˜ ë°ì´í„°ë² ì´ìŠ¤
        const vocabularyData = [
            // ê¸°ì´ˆ ì–´íœ˜ (ê³ ë¹ˆì¶œ)
            { japanese: 'ä¼šã†', reading: 'ã‚ã†', meaning: 'ë§Œë‚˜ë‹¤', frequency: 5, level: 'basic' },
            { japanese: 'èµ¤ã„', reading: 'ã‚ã‹ã„', meaning: 'ë¹¨ê°›ë‹¤, ë¶‰ë‹¤', frequency: 4, level: 'basic' },
            { japanese: 'æœ', reading: 'ã‚ã•', meaning: 'ì•„ì¹¨', frequency: 5, level: 'basic' },
            { japanese: 'å¾Œ', reading: 'ã‚ã¨', meaning: 'ë’¤, ë‚˜ì¤‘', frequency: 5, level: 'basic' },
            { japanese: 'è¨€ã†', reading: 'ã„ã†', meaning: 'ë§í•˜ë‹¤', frequency: 5, level: 'basic' },
            { japanese: 'ä¸Š', reading: 'ã†ãˆ', meaning: 'ìœ„', frequency: 5, level: 'basic' },
            { japanese: 'ç”Ÿã¾ã‚Œã‚‹', reading: 'ã†ã¾ã‚Œã‚‹', meaning: 'íƒœì–´ë‚˜ë‹¤', frequency: 4, level: 'basic' },
            { japanese: 'é§…', reading: 'ãˆã', meaning: 'ì—­', frequency: 5, level: 'basic' },
            { japanese: 'å¤§ãã„', reading: 'ãŠãŠãã„', meaning: 'í¬ë‹¤', frequency: 5, level: 'basic' },
            { japanese: 'ãŠé‡‘', reading: 'ãŠã‹ã­', meaning: 'ëˆ', frequency: 5, level: 'basic' },
            { japanese: 'å¤–å›½', reading: 'ãŒã„ã“ã', meaning: 'ì™¸êµ­', frequency: 4, level: 'basic' },
            { japanese: 'è²·ã†', reading: 'ã‹ã†', meaning: 'ì‚¬ë‹¤', frequency: 5, level: 'basic' },
            { japanese: 'å­¦æ ¡', reading: 'ãŒã£ã“ã†', meaning: 'í•™êµ', frequency: 5, level: 'basic' },
            { japanese: 'ç«æ›œæ—¥', reading: 'ã‹ã‚ˆã†ã³', meaning: 'í™”ìš”ì¼', frequency: 3, level: 'basic' },
            { japanese: 'èã', reading: 'ãã', meaning: 'ë“£ë‹¤', frequency: 5, level: 'basic' },
            { japanese: 'éŠ€è¡Œ', reading: 'ãã‚“ã“ã†', meaning: 'ì€í–‰', frequency: 4, level: 'basic' },
            { japanese: 'é‡‘æ›œæ—¥', reading: 'ãã‚“ã‚ˆã†ã³', meaning: 'ê¸ˆìš”ì¼', frequency: 3, level: 'basic' },
            { japanese: 'å›½', reading: 'ãã«', meaning: 'ë‚˜ë¼', frequency: 4, level: 'basic' },
            { japanese: 'è»Š', reading: 'ãã‚‹ã¾', meaning: 'ìë™ì°¨', frequency: 5, level: 'basic' },
            { japanese: 'åˆå¾Œ', reading: 'ã”ã”', meaning: 'ì˜¤í›„', frequency: 4, level: 'basic' },
            
            // ì¤‘ê¸‰ ì–´íœ˜
            { japanese: 'ä»Šæœˆ', reading: 'ã“ã‚“ã’ã¤', meaning: 'ì´ë²ˆ ë‹¬', frequency: 3, level: 'intermediate' },
            { japanese: 'é­š', reading: 'ã•ã‹ãª', meaning: 'ìƒì„ , ë¬¼ê³ ê¸°', frequency: 4, level: 'intermediate' },
            { japanese: 'å››æœˆ', reading: 'ã—ãŒã¤', meaning: '4ì›”', frequency: 3, level: 'intermediate' },
            { japanese: 'ä¸‹', reading: 'ã—ãŸ', meaning: 'ì•„ë˜, ë°‘', frequency: 4, level: 'intermediate' },
            { japanese: 'ä¸ƒæœˆ', reading: 'ã—ã¡ãŒã¤', meaning: '7ì›”', frequency: 3, level: 'intermediate' },
            { japanese: 'ä¸ƒæ™‚', reading: 'ã—ã¡ã˜', meaning: '7ì‹œ', frequency: 4, level: 'intermediate' },
            { japanese: 'ç™½ã„', reading: 'ã—ã‚ã„', meaning: 'í¬ë‹¤, í•˜ì–—ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'åƒå††', reading: 'ã›ã‚“ãˆã‚“', meaning: '1000ì—”', frequency: 4, level: 'intermediate' },
            { japanese: 'å…ˆç”Ÿ', reading: 'ã›ã‚“ã›ã„', meaning: 'ì„ ìƒë‹˜', frequency: 5, level: 'intermediate' },
            { japanese: 'å¤–', reading: 'ãã¨', meaning: 'ë°–', frequency: 3, level: 'intermediate' },
            { japanese: 'ç©º', reading: 'ãã‚‰', meaning: 'í•˜ëŠ˜', frequency: 3, level: 'intermediate' },
            { japanese: 'å¤§å­¦', reading: 'ã ã„ãŒã', meaning: 'ëŒ€í•™', frequency: 4, level: 'intermediate' },
            { japanese: 'é«˜ã„', reading: 'ãŸã‹ã„', meaning: '(í‚¤ê°€) í¬ë‹¤, (ê°’ì´) ë¹„ì‹¸ë‹¤, ë†’ë‹¤', frequency: 5, level: 'intermediate' },
            { japanese: 'å‡ºã™', reading: 'ã ã™', meaning: 'ë‚´ë‹¤, ì œì¶œí•˜ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'é£Ÿã¹ã‚‹', reading: 'ãŸã¹ã‚‹', meaning: 'ë¨¹ë‹¤', frequency: 5, level: 'intermediate' },
            { japanese: 'å°ã•ã„', reading: 'ã¡ã„ã•ã„', meaning: '(í¬ê¸°ê°€) ì‘ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'æ‰‹', reading: 'ã¦', meaning: 'ì†', frequency: 4, level: 'intermediate' },
            { japanese: 'å‡ºã‚‹', reading: 'ã§ã‚‹', meaning: 'ë‚˜ê°€(ì˜¤)ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'é›»è©±', reading: 'ã§ã‚“ã‚', meaning: 'ì „í™”', frequency: 5, level: 'intermediate' },
            { japanese: 'åæ—¥', reading: 'ã¨ãŠã‹', meaning: '10ì¼', frequency: 3, level: 'intermediate' },
            
            // ê³ ê¸‰ ì–´íœ˜
            { japanese: 'å‹ã ã¡', reading: 'ã¨ã‚‚ã ã¡', meaning: 'ì¹œêµ¬', frequency: 5, level: 'advanced' },
            { japanese: 'åœŸæ›œæ—¥', reading: 'ã©ã‚ˆã†ã³', meaning: 'í† ìš”ì¼', frequency: 3, level: 'advanced' },
            { japanese: 'ä¸­', reading: 'ãªã‹', meaning: 'ì•ˆ, ì†', frequency: 4, level: 'advanced' },
            { japanese: 'é•·ã„', reading: 'ãªãŒã„', meaning: 'ê¸¸ë‹¤', frequency: 4, level: 'advanced' },
            { japanese: 'ä½•äºº', reading: 'ãªã‚“ã«ã‚“', meaning: 'ëª‡ ëª…', frequency: 3, level: 'advanced' },
            { japanese: 'é£²ã‚€', reading: 'ã®ã‚€', meaning: 'ë§ˆì‹œë‹¤, ì‚¼í‚¤ë‹¤', frequency: 4, level: 'advanced' },
            { japanese: 'å…¥ã‚‹', reading: 'ã¯ã„ã‚‹', meaning: 'ë“¤ì–´ê°€(ì˜¤)ë‹¤', frequency: 4, level: 'advanced' },
            { japanese: 'èŠ±', reading: 'ã¯ãª', meaning: 'ê½ƒ', frequency: 3, level: 'advanced' },
            { japanese: 'äºº', reading: 'ã²ã¨', meaning: 'ì‚¬ëŒ', frequency: 5, level: 'advanced' },
            { japanese: 'å¤ã„', reading: 'ãµã‚‹ã„', meaning: 'ì˜¤ë˜ë˜ë‹¤, ë‚¡ë‹¤', frequency: 3, level: 'advanced' },
            { japanese: 'æœ¬', reading: 'ã»ã‚“', meaning: 'ì±…', frequency: 4, level: 'advanced' },
            { japanese: 'æ¯æ—¥', reading: 'ã¾ã„ã«ã¡', meaning: 'ë§¤ì¼', frequency: 4, level: 'advanced' },
            { japanese: 'å‰', reading: 'ã¾ãˆ', meaning: 'ì•', frequency: 4, level: 'advanced' },
            { japanese: 'å³', reading: 'ã¿ã', meaning: 'ì˜¤ë¥¸ìª½', frequency: 3, level: 'advanced' },
            { japanese: 'æ°´', reading: 'ã¿ãš', meaning: 'ë¬¼', frequency: 4, level: 'advanced' },
            { japanese: 'åº—', reading: 'ã¿ã›', meaning: 'ê°€ê²Œ', frequency: 3, level: 'advanced' },
            { japanese: 'è¦‹ã›ã‚‹', reading: 'ã¿ã›ã‚‹', meaning: 'ë³´ì´ë‹¤, ë³´ì—¬ ì£¼ë‹¤', frequency: 3, level: 'advanced' },
            { japanese: 'é“', reading: 'ã¿ã¡', meaning: 'ê¸¸', frequency: 3, level: 'advanced' },
            { japanese: 'è¦‹ã‚‹', reading: 'ã¿ã‚‹', meaning: 'ë³´ë‹¤', frequency: 5, level: 'advanced' },
            { japanese: 'æœ¨æ›œæ—¥', reading: 'ã‚‚ãã‚ˆã†ã³', meaning: 'ëª©ìš”ì¼', frequency: 3, level: 'advanced' }
        ];

        // ë¬¸ë²• ë¬¸ì œ ë°ì´í„°
        const grammarQuestions = [
            {
                question: "ã€Œå…ˆé€±ã€€ãƒ‡ãƒ‘ãƒ¼ãƒˆã«ã€€ã‹ã„ã‚‚ã®ã«ã€€ï¼¿ï¼¿ï¼¿ã¾ã—ãŸã€‚ã€",
                options: ["ã›ã‚“ã—ã‚…", "ã›ã‚“ã—ã‚…ã†", "ãœã‚“ã—ã‚…", "ãœã‚“ã—ã‚…ã†"],
                correct: 1,
                explanation: "ã€Œå…ˆé€±ã€ëŠ” ã€Œã›ã‚“ã—ã‚…ã†ã€ë¡œ ì½ìŠµë‹ˆë‹¤."
            },
            {
                question: "ã€Œã”ã¯ã‚“ã®ã€€å¾Œã§ã€€ï¼¿ï¼¿ï¼¿ã¾ã—ã‚‡ã†ã€‚ã€",
                options: ["ã¤ã", "ã†ã—ã‚", "ã¾ãˆ", "ã‚ã¨"],
                correct: 3,
                explanation: "ì‹œê°„ì˜ ìˆœì„œë¥¼ ë‚˜íƒ€ë‚¼ ë•ŒëŠ” ã€Œã‚ã¨ã€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤."
            },
            {
                question: "ã€Œã‚‚ã†ã€€ã„ã¡ã©ã€€ï¼¿ï¼¿ï¼¿ã¦ã€€ãã ã•ã„ã€‚ã€",
                options: ["ã„ã£ã¦", "ãã£ã¦", "ã¾ã£ã¦", "ãŸã£ã¦"],
                correct: 0,
                explanation: "ã€Œè¨€ã†ã€ì˜ ã¦í˜•ì€ ã€Œè¨€ã£ã¦ã€ì…ë‹ˆë‹¤."
            }
        ];

        // ë…í•´ ë¬¸ì œ ë°ì´í„°
        const readingQuestions = [
            {
                passage: "ã‚ãŸã—ã¯ã€€ä»Šæ—¥ã€å‹ã ã¡ã¨ã€€ãˆã„ãŒã‚’ã€€è¦‹ã«ã€€è¡Œãã¾ã—ãŸã€‚3ã‹æœˆå‰ã«ã€€è¦‹ãŸã€€ãˆã„ãŒã®ã€€DVDãŒã€€ã»ã—ã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚è²·ã£ãŸã€€DVDã¯ã€å‹ã ã¡ã‚„ã€€å§‰ã¨ã€€ã„ã£ã—ã‚‡ã«ã€€è¦‹ã¾ã™ã€‚",
                question: "ã€Œã‚ãŸã—ã€ã¯ã€€ä»Šæ—¥ã€ä½•ã‚’ã€€ã—ã¾ã—ãŸã‹ã€‚",
                options: [
                    "å‹ã ã¡ã¨ã€€ãˆã„ãŒã‚’ã€€è¦‹ã«ã€€è¡Œãã¾ã—ãŸã€‚",
                    "å‹ã ã¡ã¨ã€€DVDã‚’ã€€è²·ã„ã«ã€€è¡Œãã¾ã—ãŸã€‚", 
                    "å§‰ã¨ã€€ãˆã„ãŒã‚’ã€€è¦‹ã«ã€€è¡Œãã¾ã—ãŸã€‚",
                    "å§‰ã¨ã€€DVDã‚’ã€€è²·ã„ã«ã€€è¡Œãã¾ã—ãŸã€‚"
                ],
                correct: 0,
                explanation: "ã€Œã‚ãŸã—ã¯ã€€ä»Šæ—¥ã€å‹ã ã¡ã¨ã€€ãˆã„ãŒã‚’ã€€è¦‹ã«ã€€è¡Œãã¾ã—ãŸã€ë¼ê³  ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
            }
        ];

        // í˜„ì¬ ë¬¸ì œ ìƒíƒœ
        let currentQuestion = null;
        let currentQuestionIndex = 0;
        let currentDifficulty = 'basic';
        let studiedCount = 0;
        let correctCount = 0;
        let totalAttempts = 0;

        // ì„¹ì…˜ ì „í™˜
        function showSection(sectionName) {
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });

            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // ì„ íƒëœ ì„¹ì…˜ í‘œì‹œ
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            event.target.classList.add('active');

            // ê° ì„¹ì…˜ë³„ ì´ˆê¸°í™”
            if (sectionName === 'vocabulary') {
                displayVocabulary();
            } else if (sectionName === 'grammar') {
                loadGrammarQuestion();
            } else if (sectionName === 'reading') {
                loadReadingQuestion();
            } else if (sectionName === 'quiz') {
                generateQuestion();
            }
        }

        // ë‚œì´ë„ ì„¤ì •
        function setDifficulty(level) {
            currentDifficulty = level;
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            generateQuestion();
        }

        // ë¬¸ì œ ìƒì„±
        function generateQuestion() {
            let availableWords = vocabularyData;
            
            if (currentDifficulty !== 'mixed') {
                availableWords = vocabularyData.filter(word => word.level === currentDifficulty);
            }

            if (availableWords.length === 0) {
                availableWords = vocabularyData;
            }

            const randomWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            const questionTypes = ['reading', 'meaning', 'kanji'];
            const questionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];

            generateQuestionByType(randomWord, questionType);
        }

        function generateQuestionByType(word, type) {
            const questionContainer = document.getElementById('questionText');
            const japaneseContainer = document.getElementById('japaneseText');
            const optionsContainer = document.getElementById('optionsContainer');
            
            let question, correctAnswer, options;

            switch (type) {
                case 'reading':
                    question = "ë‹¤ìŒ í•œìì˜ ì½ê¸°ëŠ”?";
                    japaneseContainer.textContent = word.japanese;
                    correctAnswer = word.reading;
                    options = generateReadingOptions(word);
                    break;
                case 'meaning':
                    question = "ë‹¤ìŒ ë‹¨ì–´ì˜ ëœ»ì€?";
                    japaneseContainer.textContent = word.japanese + " (" + word.reading + ")";
                    correctAnswer = word.meaning;
                    options = generateMeaningOptions(word);
                    break;
                case 'kanji':
                    question = "ë‹¤ìŒ ì½ê¸°ì— í•´ë‹¹í•˜ëŠ” í•œìëŠ”?";
                    japaneseContainer.textContent = word.reading;
                    correctAnswer = word.japanese;
                    options = generateKanjiOptions(word);
                    break;
            }

            questionContainer.textContent = question;
            displayOptions(options, correctAnswer);
            currentQuestion = { word, type, correctAnswer };
        }

        function generateReadingOptions(correctWord) {
            const options = [correctWord.reading];
            const similarWords = vocabularyData.filter(w => 
                w.japanese !== correctWord.japanese && 
                w.reading.length === correctWord.reading.length
            );
            
            while (options.length < 4 && similarWords.length > 0) {
                const randomWord = similarWords[Math.floor(Math.random() * similarWords.length)];
                if (!options.includes(randomWord.reading)) {
                    options.push(randomWord.reading);
                }
                similarWords.splice(similarWords.indexOf(randomWord), 1);
            }

            // ë¶€ì¡±í•œ ì„ íƒì§€ ì±„ìš°ê¸°
            const commonReadings = ['ã‚ã„', 'ãˆã‚“', 'ãŒã', 'ã›ã„', 'ã¨ã†', 'ã«ã¡', 'ã»ã‚“'];
            while (options.length < 4) {
                const randomReading = commonReadings[Math.floor(Math.random() * commonReadings.length)];
                if (!options.includes(randomReading)) {
                    options.push(randomReading);
                }
            }

            return shuffleArray(options);
        }

        function generateMeaningOptions(correctWord) {
            const options = [correctWord.meaning];
            const otherWords = vocabularyData.filter(w => w.japanese !== correctWord.japanese);
            
            while (options.length < 4 && otherWords.length > 0) {
                const randomWord = otherWords[Math.floor(Math.random() * otherWords.length)];
                if (!options.includes(randomWord.meaning)) {
                    options.push(randomWord.meaning);
                }
                otherWords.splice(otherWords.indexOf(randomWord), 1);
            }

            return shuffleArray(options);
        }

        function generateKanjiOptions(correctWord) {
            const options = [correctWord.japanese];
            const similarWords = vocabularyData.filter(w => 
                w.reading !== correctWord.reading && 
                w.japanese.length === correctWord.japanese.length
            );
            
            while (options.length < 4 && similarWords.length > 0) {
                const randomWord = similarWords[Math.floor(Math.random() * similarWords.length)];
                if (!options.includes(randomWord.japanese)) {
                    options.push(randomWord.japanese);
                }
                similarWords.splice(similarWords.indexOf(randomWord), 1);
            }

            // ë¶€ì¡±í•œ ì„ íƒì§€ ì±„ìš°ê¸°
            const commonKanji = ['æ™‚é–“', 'å­¦ç”Ÿ', 'ä¼šç¤¾', 'é›»è»Š', 'ä»Šæ—¥'];
            while (options.length < 4) {
                const randomKanji = commonKanji[Math.floor(Math.random() * commonKanji.length)];
                if (!options.includes(randomKanji)) {
                    options.push(randomKanji);
                }
            }

            return shuffleArray(options);
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function displayOptions(options, correctAnswer) {
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';

            options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(optionElement, option);
                container.appendChild(optionElement);
            });
        }

        function selectOption(element, value) {
            // ì´ì „ ì„ íƒ í•´ì œ
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // ìƒˆë¡œìš´ ì„ íƒ
            element.classList.add('selected');
            currentQuestion.selectedAnswer = value;
        }

        function checkAnswer() {
            if (!currentQuestion.selectedAnswer) {
                alert('ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            totalAttempts++;
            const isCorrect = currentQuestion.selectedAnswer === currentQuestion.correctAnswer;
            
            if (isCorrect) {
                correctCount++;
            }

            // ì‹œê°ì  í”¼ë“œë°±
            document.querySelectorAll('.option').forEach(opt => {
                if (opt.textContent === currentQuestion.correctAnswer) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected') && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            // í”¼ë“œë°± í‘œì‹œ
            const feedbackElement = document.getElementById('feedback');
            feedbackElement.style.display = 'block';
            feedbackElement.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
            
            let feedbackText = isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰' : 'í‹€ë ¸ìŠµë‹ˆë‹¤. ğŸ˜…';
            feedbackText += `<br><strong>ì •ë‹µ:</strong> ${currentQuestion.correctAnswer}`;
            
            if (currentQuestion.word.meaning) {
                feedbackText += `<br><strong>ì˜ë¯¸:</strong> ${currentQuestion.word.meaning}`;
            }
            
            feedbackElement.innerHTML = feedbackText;

            // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';

            updateStats();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            studiedCount++;
            
            // UI ë¦¬ì…‹
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const progress = (currentQuestionIndex % 10) * 10;
            document.getElementById('progressFill').style.width = progress + '%';
            
            generateQuestion();
        }

        function skipQuestion() {
            nextQuestion();
        }

        function updateStats() {
            document.getElementById('studiedWords').textContent = studiedCount;
            const rate = totalAttempts > 0 ? Math.round((correctCount / totalAttempts) * 100) : 0;
            document.getElementById('correctRate').textContent = rate + '%';
        }

        // ë‹¨ì–´ì¥ í‘œì‹œ
        function displayVocabulary() {
            const container = document.getElementById('wordList');
            container.innerHTML = '';

            vocabularyData.forEach(word => {
                const wordCard = document.createElement('div');
                wordCard.className = 'word-card fade-in';
                
                wordCard.innerHTML = `
                    <div class="word-japanese">${word.japanese}</div>
                    <div class="word-reading">${word.reading}</div>
                    <div class="word-meaning">${word.meaning}</div>
                    <div class="word-frequency">ì¶œì œ ë¹ˆë„: ${'â˜…'.repeat(word.frequency)}</div>
                `;
                
                container.appendChild(wordCard);
            });
        }

        // ë¬¸ë²• ë¬¸ì œ ë¡œë“œ
        function loadGrammarQuestion() {
            const randomIndex = Math.floor(Math.random() * grammarQuestions.length);
            const question = grammarQuestions[randomIndex];
            
            document.getElementById('grammarQuestion').innerHTML = question.question;
            
            const container = document.getElementById('grammarOptions');
            container.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = `${index + 1}. ${option}`;
                optionElement.onclick = () => selectGrammarOption(optionElement, index);
                container.appendChild(optionElement);
            });
            
            currentQuestion = { 
                ...question, 
                selectedAnswer: null,
                type: 'grammar'
            };
        }

        function selectGrammarOption(element, index) {
            document.querySelectorAll('#grammarOptions .option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            currentQuestion.selectedAnswer = index;
        }

        function checkGrammarAnswer() {
            if (currentQuestion.selectedAnswer === null) {
                alert('ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            totalAttempts++;
            const isCorrect = currentQuestion.selectedAnswer === currentQuestion.correct;
            
            if (isCorrect) correctCount++;

            // ì‹œê°ì  í”¼ë“œë°±
            const options = document.querySelectorAll('#grammarOptions .option');
            options.forEach((opt, index) => {
                if (index === currentQuestion.correct) {
                    opt.classList.add('correct');
                } else if (index === currentQuestion.selectedAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            // í”¼ë“œë°± í‘œì‹œ
            const feedbackElement = document.getElementById('grammarFeedback');
            feedbackElement.style.display = 'block';
            feedbackElement.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
            feedbackElement.innerHTML = (isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰' : 'í‹€ë ¸ìŠµë‹ˆë‹¤. ğŸ˜…') + 
                `<br><strong>í•´ì„¤:</strong> ${currentQuestion.explanation}`;

            // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
            document.getElementById('grammarSubmitBtn').style.display = 'none';
            document.getElementById('grammarNextBtn').style.display = 'inline-block';

            updateStats();
        }

        function nextGrammarQuestion() {
            studiedCount++;
            
            // UI ë¦¬ì…‹
            document.getElementById('grammarFeedback').style.display = 'none';
            document.getElementById('grammarSubmitBtn').style.display = 'inline-block';
            document.getElementById('grammarNextBtn').style.display = 'none';
            
            loadGrammarQuestion();
        }

        // ë…í•´ ë¬¸ì œ ë¡œë“œ
        function loadReadingQuestion() {
            const randomIndex = Math.floor(Math.random() * readingQuestions.length);
            const question = readingQuestions[randomIndex];
            
            document.getElementById('readingPassage').innerHTML = `<div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; line-height: 1.8; font-size: 1.2rem;">${question.passage}</div>`;
            document.getElementById('readingQuestion').innerHTML = question.question;
            
            const container = document.getElementById('readingOptions');
            container.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = `${index + 1}. ${option}`;
                optionElement.onclick = () => selectReadingOption(optionElement, index);
                container.appendChild(optionElement);
            });
            
            currentQuestion = { 
                ...question, 
                selectedAnswer: null,
                type: 'reading'
            };
        }

        function selectReadingOption(element, index) {
            document.querySelectorAll('#readingOptions .option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            currentQuestion.selectedAnswer = index;
        }

        function checkReadingAnswer() {
            if (currentQuestion.selectedAnswer === null) {
                alert('ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            totalAttempts++;
            const isCorrect = currentQuestion.selectedAnswer === currentQuestion.correct;
            
            if (isCorrect) correctCount++;

            // ì‹œê°ì  í”¼ë“œë°±
            const options = document.querySelectorAll('#readingOptions .option');
            options.forEach((opt, index) => {
                if (index === currentQuestion.correct) {
                    opt.classList.add('correct');
                } else if (index === currentQuestion.selectedAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            // í”¼ë“œë°± í‘œì‹œ
            const feedbackElement = document.getElementById('readingFeedback');
            feedbackElement.style.display = 'block';
            feedbackElement.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
            feedbackElement.innerHTML = (isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰' : 'í‹€ë ¸ìŠµë‹ˆë‹¤. ğŸ˜…') + 
                `<br><strong>í•´ì„¤:</strong> ${currentQuestion.explanation}`;

            // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
            document.getElementById('readingSubmitBtn').style.display = 'none';
            document.getElementById('readingNextBtn').style.display = 'inline-block';

            updateStats();
        }

        function nextReadingQuestion() {
            studiedCount++;
            
            // UI ë¦¬ì…‹
            document.getElementById('readingFeedback').style.display = 'none';
            document.getElementById('readingSubmitBtn').style.display = 'inline-block';
            document.getElementById('readingNextBtn').style.display = 'none';
            
            loadReadingQuestion();
        }

        // ì´ˆê¸°í™”
        window.onload = function() {
            generateQuestion();
        };

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '4') {
                const optionIndex = parseInt(event.key) - 1;
                const options = document.querySelectorAll('.option');
                if (options[optionIndex]) {
                    options[optionIndex].click();
                }
            } else if (event.key === 'Enter') {
                const submitBtn = document.querySelector('.btn-primary[style*="inline-block"], .btn-primary:not([style*="none"])');
                const nextBtn = document.querySelector('.btn-success[style*="inline-block"]');
                
                if (nextBtn && nextBtn.style.display !== 'none') {
                    nextBtn.click();
                } else if (submitBtn && submitBtn.style.display !== 'none') {
                    submitBtn.click();
                }
            } else if (event.key === ' ') {
                event.preventDefault();
                skipQuestion();
            }
        });

        // ì¶”ê°€ ì–´íœ˜ ë°ì´í„° (ë” ë§ì€ ë‹¨ì–´ë“¤)
        const additionalVocabulary = [
            { japanese: 'ã‚ã—ãŸ', reading: 'ã‚ã—ãŸ', meaning: 'ë‚´ì¼', frequency: 4, level: 'basic' },
            { japanese: 'ã‚ãã¶', reading: 'ã‚ãã¶', meaning: 'ë†€ë‹¤', frequency: 3, level: 'basic' },
            { japanese: 'ã‚ãŸãŸã‹ã„', reading: 'ã‚ãŸãŸã‹ã„', meaning: 'ë”°ëœ»í•˜ë‹¤', frequency: 3, level: 'basic' },
            { japanese: 'ã‚ã¾ã„', reading: 'ã‚ã¾ã„', meaning: 'ë‹¬ë‹¤', frequency: 3, level: 'basic' },
            { japanese: 'ã‚ã‚‰ã†', reading: 'ã‚ã‚‰ã†', meaning: 'ì”»ë‹¤', frequency: 3, level: 'basic' },
            { japanese: 'ã‚ã‚‹ã', reading: 'ã‚ã‚‹ã', meaning: 'ê±·ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'ã„ãã‚‰', reading: 'ã„ãã‚‰', meaning: 'ì–¼ë§ˆ(ê°’)', frequency: 4, level: 'intermediate' },
            { japanese: 'ã„ããŒã—ã„', reading: 'ã„ããŒã—ã„', meaning: 'ë°”ì˜ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'ã„ã¬', reading: 'ã„ã¬', meaning: 'ê°œ', frequency: 3, level: 'intermediate' },
            { japanese: 'ãŠã„ã—ã„', reading: 'ãŠã„ã—ã„', meaning: 'ë§›ìˆë‹¤', frequency: 5, level: 'intermediate' },
            { japanese: 'ãŠãã‚‹', reading: 'ãŠãã‚‹', meaning: 'ì¼ì–´ë‚˜ë‹¤', frequency: 4, level: 'intermediate' },
            { japanese: 'ãŠã‚‚ã—ã‚ã„', reading: 'ãŠã‚‚ã—ã‚ã„', meaning: 'ì¬ë¯¸ìˆë‹¤', frequency: 4, level: 'advanced' },
            { japanese: 'ã‚«ãƒ¡ãƒ©', reading: 'ã‚«ãƒ¡ãƒ©', meaning: 'ì¹´ë©”ë¼', frequency: 3, level: 'advanced' },
            { japanese: 'ã‚¿ã‚¯ã‚·ãƒ¼', reading: 'ã‚¿ã‚¯ã‚·ãƒ¼', meaning: 'íƒì‹œ', frequency: 4, level: 'advanced' },
            { japanese: 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³', reading: 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³', meaning: 'ë ˆìŠ¤í† ë‘', frequency: 3, level: 'advanced' }
        ];

        // ì–´íœ˜ ë°ì´í„°ì— ì¶”ê°€
        vocabularyData.push(...additionalVocabulary);

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í™œìš© (ì§„í–‰ ìƒí™© ì €ì¥)
        function saveProgress() {
            const progress = {
                studiedCount,
                correctCount,
                totalAttempts,
                lastStudyDate: new Date().toDateString()
            };
            localStorage.setItem('jlptProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('jlptProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                studiedCount = progress.studiedCount || 0;
                correctCount = progress.correctCount || 0;
                totalAttempts = progress.totalAttempts || 0;
                updateStats();
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì§„í–‰ìƒí™© ë¶ˆëŸ¬ì˜¤ê¸°
        loadProgress();

        // í˜ì´ì§€ ì¢…ë£Œ ì‹œ ì§„í–‰ìƒí™© ì €ì¥
        window.addEventListener('beforeunload', saveProgress);
    </script>
</body>
</html>